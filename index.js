(()=>{"use strict";var t,e,n,r,s={265:(t,e,n)=>{n.a(t,(async(t,e)=>{try{var r=n(923),s=n(304);const i=await fetch("sysroot.tar");if(!i.ok)throw new Error("failed to get sysroot tarball");const o=await i.bytes(),l=(0,s.x)(o);let a=100;class f extends r.ZH{constructor(t,e){super(t,e),this.ino=BigInt(e.ino)}stat(){let t=new r.J.lGR(r.J.bqX,this.size);return t.ino=this.ino,t}}class d extends r.__{constructor(t,e){super(t),this.ino=BigInt(e)}stat(){let t=new r.J.lGR(r.J.lNn,0n);return t.ino=this.ino,t}}function u(t,e=void 0){let n=e;void 0===e&&(n=[]);for(const e in t){const r=t[e];if(r instanceof Uint8Array){const t=new f(r,{readonly:!0,ino:a++});n.push([e,t])}else{const t=u(r);n.push([e,t])}}return void 0===e?new d(n,a++):new r.xy(".",n)}let c=await WebAssembly.compileStreaming(fetch("llvm.wasm"));document.getElementById("downloading").innerText="Done downloading!";const _={wasi:["--target=wasm32-wasip1"],cm01:["--target=armv6m-unknown-none-eabi"],cm3:["--target=armv7m-unknown-none-eabi"],cm4:["--target=armv7em-unknown-none-eabi","-mfpu=none"],cm4f:["--target=armv7em-unknown-none-eabihf"],"qk-v2a":["--target=riscv32-unknown-none-elf","-march=rv32ec_xwchc"],"qk-v34a":["--target=riscv32-unknown-none-elf","-march=rv32imac"],"qk-v4bc":["--target=riscv32-unknown-none-elf","-march=rv32imac_xwchc"],"qk-v4f":["--target=riscv32-unknown-none-elf","-march=rv32imafc_xwchc"]};async function h(t,e){let n=[],s=[new r.TG(new r.ZH([])),r.Pn.lineBuffered((t=>n.push(t))),r.Pn.lineBuffered((t=>n.push(t))),t],i=new r.bJ(e,[],s),o=await WebAssembly.instantiate(c,{wasi_snapshot_preview1:i.wasiImport});return 0!==i.start(o)&&(console.log(n),alert("Something went wrong!")),n}async function p(t){const e=document.getElementById("sourcecode").value,n=document.getElementById("linkscript").value,r=document.getElementById("compileflags").value,s=document.getElementById("target").value;let i=["clang"];i="wasi"===s?i.concat(["--sysroot=sysroot/wasm32-wasip1","-resource-dir=sysroot/wasm32-wasip1"]):i.concat(["--sysroot=sysroot","-resource-dir=sysroot"]),i=i.concat(_[s]),i=i.concat(r.split(" ")),i.push("test.c"),"wasi"!==s&&i.push("-Wl,-Ttest.ld"),i.push("-###"),console.log(i);const o=u(l,[["tmp",new d(new Map,a++)],["test.c",new f(new TextEncoder("utf-8").encode(e),{ino:a++})],["test.ld",new f(new TextEncoder("utf-8").encode(n),{ino:a++})]]);console.log(o);const c=await h(o,i);console.log(c);let p=0,y=[];for(const t of c)0===p&&(["clang","Target:","Thread model:","InstalledDir:","Build config:"].some((e=>t.startsWith(e)))||(p=1)),1===p&&(t.startsWith(' "')?y.push(t.split(" ").slice(1).map((t=>t.startsWith('"')&&t.endsWith('"')?t.slice(1,t.length-1):t))):p=2);if(1===p)for(let t of y){""===t[0]&&(t=t.slice(1));for(let e=0;e<t.length;e++)t[e].startsWith("/tmp")&&(t[e]="tmp/asdf.o");console.log(t);const e=await h(o,t);document.getElementById("output").innerText=e.join("\n")}else document.getElementById("output").innerText=c.join("\n"),alert("Something went wrong!");const w=o.dir.contents.get("a.out").data,m=new Blob([w],{type:"application/x-elf"}),g=URL.createObjectURL(m);let b=document.createElement("a");b.href=g,b.download="a.out",b.style="display: none",document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(g)}document.getElementById("compile").onclick=p,e()}catch(y){e(y)}}),1)},304:(t,e,n)=>{n.d(e,{x:()=>i});const r=new TextDecoder;function s(t,e,n){let s=0;for(;0!=t[e+s]&&s<n;)s++;return r.decode(t.slice(e,e+s))}function i(t){let e={},n=0;for(;n<=t.length&&n!=t.length-1024;){let r=s(t,n+0,100);const i=t[n+156],o=s(t,n+345,155);if(0!=o.length&&(r=o+"/"+r),53==i){const t=r.split("/");let s=e;for(let e=0;e<t.length-2;e++)s=s[t[e]];s[t[t.length-2]]={},n+=512}else if(48==i){const i=s(t,n+124,11),o=parseInt(i,8),l=512*((o+511)/512|0),a=t.slice(n+512,n+512+o),f=r.split("/");let d=e;for(let t=0;t<f.length-1;t++)d=d[f[t]];d[f[f.length-1]]=a,n+=512+l}else{if(49!=i)throw new Error("unimplemented!");{const i=s(t,n+157,100).split("/");let o=e;for(const t of i)o=o[t];const l=r.split("/");let a=e;for(let t=0;t<l.length-1;t++)a=a[l[t]];a[l[l.length-1]]=o,n+=512}}}return e}new TextDecoder},923:(t,e,n)=>{n.d(e,{Pn:()=>X,__:()=>F,ZH:()=>H,TG:()=>O,xy:()=>Z,bJ:()=>q,J:()=>r});var r={};n.r(r),n.d(r,{rMm:()=>i,KOl:()=>s,esx:()=>x,TDZ:()=>T,pdx:()=>l,bMI:()=>a,Ch$:()=>f,p7p:()=>d,rJp:()=>u,yG8:()=>c,ERc:()=>_,BZn:()=>m,M1J:()=>h,efI:()=>p,jY0:()=>y,EqF:()=>w,zIp:()=>o,Nt5:()=>I,_z5:()=>B,lNn:()=>D,bqX:()=>A,LBw:()=>j,lGR:()=>N,D1b:()=>b,Rp4:()=>E,ffk:()=>z,o7e:()=>L,cTP:()=>V,Qh1:()=>M,L5A:()=>g,wZF:()=>k,vie:()=>v,s6s:()=>U});const s=0,i=1,o=0,l=8,a=20,f=28,d=31,u=37,c=44,_=52,h=54,p=55,y=58,w=63,m=76,g=64;class b{static read_bytes(t,e){const n=new b;return n.buf=t.getUint32(e,!0),n.buf_len=t.getUint32(e+4,!0),n}static read_bytes_array(t,e,n){const r=[];for(let s=0;s<n;s++)r.push(b.read_bytes(t,e+8*s));return r}}class x{static read_bytes(t,e){const n=new x;return n.buf=t.getUint32(e,!0),n.buf_len=t.getUint32(e+4,!0),n}static read_bytes_array(t,e,n){const r=[];for(let s=0;s<n;s++)r.push(x.read_bytes(t,e+8*s));return r}}const U=0,k=1,v=2,B=2,D=3,A=4;class T{head_length(){return 24}name_length(){return this.dir_name.byteLength}write_head_bytes(t,e){t.setBigUint64(e,this.d_next,!0),t.setBigUint64(e+8,this.d_ino,!0),t.setUint32(e+16,this.dir_name.length,!0),t.setUint8(e+20,this.d_type)}write_name_bytes(t,e,n){t.set(this.dir_name.slice(0,Math.min(this.dir_name.byteLength,n)),e)}constructor(t,e,n){this.d_ino=0n;const r=(new TextEncoder).encode(e);this.d_next=t,this.d_namlen=r.byteLength,this.d_type=n,this.dir_name=r}}const I=1;class j{write_bytes(t,e){t.setUint8(e,this.fs_filetype),t.setUint16(e+2,this.fs_flags,!0),t.setBigUint64(e+8,this.fs_rights_base,!0),t.setBigUint64(e+16,this.fs_rights_inherited,!0)}constructor(t,e){this.fs_rights_base=0n,this.fs_rights_inherited=0n,this.fs_filetype=t,this.fs_flags=e}}const E=1,z=2,L=4,V=8;class N{write_bytes(t,e){t.setBigUint64(e,this.dev,!0),t.setBigUint64(e+8,this.ino,!0),t.setUint8(e+16,this.filetype),t.setBigUint64(e+24,this.nlink,!0),t.setBigUint64(e+32,this.size,!0),t.setBigUint64(e+38,this.atim,!0),t.setBigUint64(e+46,this.mtim,!0),t.setBigUint64(e+52,this.ctim,!0)}constructor(t,e){this.dev=0n,this.ino=0n,this.nlink=0n,this.atim=0n,this.mtim=0n,this.ctim=0n,this.filetype=t,this.size=e}}class S{write_bytes(t,e){t.setUint32(e,this.pr_name.byteLength,!0)}constructor(t){this.pr_name=(new TextEncoder).encode(t)}}class M{static dir(t){const e=new M;return e.tag=0,e.inner=new S(t),e}write_bytes(t,e){t.setUint32(e,this.tag,!0),this.inner.write_bytes(t,e+4)}}const P=new class{enable(t){this.log=function(t,e){return t?console.log.bind(console,"%c%s","color: #265BA0",e):()=>{}}(void 0===t||t,this.prefix)}get enabled(){return this.isEnabled}constructor(t){this.isEnabled=t,this.prefix="wasi:",this.enable(t)}}(!1);class W extends Error{constructor(t){super("exit with exit code "+t),this.code=t}}let q=class{start(t){this.inst=t;try{return t.exports._start(),0}catch(t){if(t instanceof W)return t.code;throw t}}initialize(t){this.inst=t,t.exports._initialize&&t.exports._initialize()}constructor(t,e,n,r={}){this.args=[],this.env=[],this.fds=[],P.enable(r.debug),this.args=t,this.env=e,this.fds=n;const a=this;this.wasiImport={args_sizes_get(t,e){const n=new DataView(a.inst.exports.memory.buffer);n.setUint32(t,a.args.length,!0);let r=0;for(const t of a.args)r+=t.length+1;return n.setUint32(e,r,!0),P.log(n.getUint32(t,!0),n.getUint32(e,!0)),0},args_get(t,e){const n=new DataView(a.inst.exports.memory.buffer),r=new Uint8Array(a.inst.exports.memory.buffer),s=e;for(let s=0;s<a.args.length;s++){n.setUint32(t,e,!0),t+=4;const i=(new TextEncoder).encode(a.args[s]);r.set(i,e),n.setUint8(e+i.length,0),e+=i.length+1}return P.enabled&&P.log(new TextDecoder("utf-8").decode(r.slice(s,e))),0},environ_sizes_get(t,e){const n=new DataView(a.inst.exports.memory.buffer);n.setUint32(t,a.env.length,!0);let r=0;for(const t of a.env)r+=t.length+1;return n.setUint32(e,r,!0),P.log(n.getUint32(t,!0),n.getUint32(e,!0)),0},environ_get(t,e){const n=new DataView(a.inst.exports.memory.buffer),r=new Uint8Array(a.inst.exports.memory.buffer),s=e;for(let s=0;s<a.env.length;s++){n.setUint32(t,e,!0),t+=4;const i=(new TextEncoder).encode(a.env[s]);r.set(i,e),n.setUint8(e+i.length,0),e+=i.length+1}return P.enabled&&P.log(new TextDecoder("utf-8").decode(r.slice(s,e))),0},clock_res_get(t,e){let n;switch(t){case i:n=5000n;break;case s:n=1000000n;break;default:return _}return new DataView(a.inst.exports.memory.buffer).setBigUint64(e,n,!0),o},clock_time_get(t,e,n){const r=new DataView(a.inst.exports.memory.buffer);if(t===s)r.setBigUint64(n,1000000n*BigInt((new Date).getTime()),!0);else if(t==i){let t;try{t=BigInt(Math.round(1e6*performance.now()))}catch(e){t=0n}r.setBigUint64(n,t,!0)}else r.setBigUint64(n,0n,!0);return 0},fd_advise:(t,e,n,r)=>null!=a.fds[t]?o:l,fd_allocate:(t,e,n)=>null!=a.fds[t]?a.fds[t].fd_allocate(e,n):l,fd_close(t){if(null!=a.fds[t]){const e=a.fds[t].fd_close();return a.fds[t]=void 0,e}return l},fd_datasync:t=>null!=a.fds[t]?a.fds[t].fd_sync():l,fd_fdstat_get(t,e){if(null!=a.fds[t]){const{ret:n,fdstat:r}=a.fds[t].fd_fdstat_get();return null!=r&&r.write_bytes(new DataView(a.inst.exports.memory.buffer),e),n}return l},fd_fdstat_set_flags:(t,e)=>null!=a.fds[t]?a.fds[t].fd_fdstat_set_flags(e):l,fd_fdstat_set_rights:(t,e,n)=>null!=a.fds[t]?a.fds[t].fd_fdstat_set_rights(e,n):l,fd_filestat_get(t,e){if(null!=a.fds[t]){const{ret:n,filestat:r}=a.fds[t].fd_filestat_get();return null!=r&&r.write_bytes(new DataView(a.inst.exports.memory.buffer),e),n}return l},fd_filestat_set_size:(t,e)=>null!=a.fds[t]?a.fds[t].fd_filestat_set_size(e):l,fd_filestat_set_times:(t,e,n,r)=>null!=a.fds[t]?a.fds[t].fd_filestat_set_times(e,n,r):l,fd_pread(t,e,n,r,s){const i=new DataView(a.inst.exports.memory.buffer),f=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=b.read_bytes_array(i,e,n);let d=0;for(const e of l){const{ret:n,data:l}=a.fds[t].fd_pread(e.buf_len,r);if(n!=o)return i.setUint32(s,d,!0),n;if(f.set(l,e.buf),d+=l.length,r+=BigInt(l.length),l.length!=e.buf_len)break}return i.setUint32(s,d,!0),o}return l},fd_prestat_get(t,e){const n=new DataView(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const{ret:r,prestat:s}=a.fds[t].fd_prestat_get();return null!=s&&s.write_bytes(n,e),r}return l},fd_prestat_dir_name(t,e,n){if(null!=a.fds[t]){const{ret:r,prestat:s}=a.fds[t].fd_prestat_get();if(null==s)return r;const i=s.inner.pr_name;return new Uint8Array(a.inst.exports.memory.buffer).set(i.slice(0,n),e),i.byteLength>n?u:o}return l},fd_pwrite(t,e,n,r,s){const i=new DataView(a.inst.exports.memory.buffer),f=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=x.read_bytes_array(i,e,n);let d=0;for(const e of l){const n=f.slice(e.buf,e.buf+e.buf_len),{ret:l,nwritten:u}=a.fds[t].fd_pwrite(n,r);if(l!=o)return i.setUint32(s,d,!0),l;if(d+=u,r+=BigInt(u),u!=n.byteLength)break}return i.setUint32(s,d,!0),o}return l},fd_read(t,e,n,r){const s=new DataView(a.inst.exports.memory.buffer),i=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=b.read_bytes_array(s,e,n);let f=0;for(const e of l){const{ret:n,data:l}=a.fds[t].fd_read(e.buf_len);if(n!=o)return s.setUint32(r,f,!0),n;if(i.set(l,e.buf),f+=l.length,l.length!=e.buf_len)break}return s.setUint32(r,f,!0),o}return l},fd_readdir(t,e,n,r,s){const i=new DataView(a.inst.exports.memory.buffer),o=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){let l=0;for(;;){const{ret:f,dirent:d}=a.fds[t].fd_readdir_single(r);if(0!=f)return i.setUint32(s,l,!0),f;if(null==d)break;if(n-l<d.head_length()){l=n;break}const u=new ArrayBuffer(d.head_length());if(d.write_head_bytes(new DataView(u),0),o.set(new Uint8Array(u).slice(0,Math.min(u.byteLength,n-l)),e),e+=d.head_length(),l+=d.head_length(),n-l<d.name_length()){l=n;break}d.write_name_bytes(o,e,n-l),e+=d.name_length(),l+=d.name_length(),r=d.d_next}return i.setUint32(s,l,!0),0}return l},fd_renumber(t,e){if(null!=a.fds[t]&&null!=a.fds[e]){const n=a.fds[e].fd_close();return 0!=n?n:(a.fds[e]=a.fds[t],a.fds[t]=void 0,0)}return l},fd_seek(t,e,n,r){const s=new DataView(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const{ret:i,offset:o}=a.fds[t].fd_seek(e,n);return s.setBigInt64(r,o,!0),i}return l},fd_sync:t=>null!=a.fds[t]?a.fds[t].fd_sync():l,fd_tell(t,e){const n=new DataView(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const{ret:r,offset:s}=a.fds[t].fd_tell();return n.setBigUint64(e,s,!0),r}return l},fd_write(t,e,n,r){const s=new DataView(a.inst.exports.memory.buffer),i=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=x.read_bytes_array(s,e,n);let f=0;for(const e of l){const n=i.slice(e.buf,e.buf+e.buf_len),{ret:l,nwritten:d}=a.fds[t].fd_write(n);if(l!=o)return s.setUint32(r,f,!0),l;if(f+=d,d!=n.byteLength)break}return s.setUint32(r,f,!0),o}return l},path_create_directory(t,e,n){const r=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const s=new TextDecoder("utf-8").decode(r.slice(e,e+n));return a.fds[t].path_create_directory(s)}return l},path_filestat_get(t,e,n,r,s){const i=new DataView(a.inst.exports.memory.buffer),o=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=new TextDecoder("utf-8").decode(o.slice(n,n+r)),{ret:f,filestat:d}=a.fds[t].path_filestat_get(e,l);return null!=d&&d.write_bytes(i,s),f}return l},path_filestat_set_times(t,e,n,r,s,i,o){const f=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=new TextDecoder("utf-8").decode(f.slice(n,n+r));return a.fds[t].path_filestat_set_times(e,l,s,i,o)}return l},path_link(t,e,n,r,s,i,o){const f=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]&&null!=a.fds[s]){const l=new TextDecoder("utf-8").decode(f.slice(n,n+r)),d=new TextDecoder("utf-8").decode(f.slice(i,i+o)),{ret:u,inode_obj:c}=a.fds[t].path_lookup(l,e);return null==c?u:a.fds[s].path_link(d,c,!1)}return l},path_open(t,e,n,r,s,i,o,f,d){const u=new DataView(a.inst.exports.memory.buffer),c=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const l=new TextDecoder("utf-8").decode(c.slice(n,n+r));P.log(l);const{ret:_,fd_obj:h}=a.fds[t].path_open(e,l,s,i,o,f);if(0!=_)return _;a.fds.push(h);const p=a.fds.length-1;return u.setUint32(d,p,!0),0}return l},path_readlink(t,e,n,r,s,i){const o=new DataView(a.inst.exports.memory.buffer),f=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const d=new TextDecoder("utf-8").decode(f.slice(e,e+n));P.log(d);const{ret:u,data:c}=a.fds[t].path_readlink(d);if(null!=c){const t=(new TextEncoder).encode(c);if(t.length>s)return o.setUint32(i,0,!0),l;f.set(t,r),o.setUint32(i,t.length,!0)}return u}return l},path_remove_directory(t,e,n){const r=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const s=new TextDecoder("utf-8").decode(r.slice(e,e+n));return a.fds[t].path_remove_directory(s)}return l},path_rename(t,e,n,r,s,i){const f=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]&&null!=a.fds[r]){const l=new TextDecoder("utf-8").decode(f.slice(e,e+n)),d=new TextDecoder("utf-8").decode(f.slice(s,s+i));let{ret:u,inode_obj:c}=a.fds[t].path_unlink(l);if(null==c)return u;if(u=a.fds[r].path_link(d,c,!0),u!=o&&a.fds[t].path_link(l,c,!0)!=o)throw"path_link should always return success when relinking an inode back to the original place";return u}return l},path_symlink(t,e,n,r,s){const i=new Uint8Array(a.inst.exports.memory.buffer);return null!=a.fds[n]?(new TextDecoder("utf-8").decode(i.slice(t,t+e)),new TextDecoder("utf-8").decode(i.slice(r,r+s)),y):l},path_unlink_file(t,e,n){const r=new Uint8Array(a.inst.exports.memory.buffer);if(null!=a.fds[t]){const s=new TextDecoder("utf-8").decode(r.slice(e,e+n));return a.fds[t].path_unlink_file(s)}return l},poll_oneoff(t,e,n){throw"async io not supported"},proc_exit(t){throw new W(t)},proc_raise(t){throw"raised signal "+t},sched_yield(){},random_get(t,e){const n=new Uint8Array(a.inst.exports.memory.buffer);for(let r=0;r<e;r++)n[t+r]=256*Math.random()|0},sock_recv(t,e,n){throw"sockets not supported"},sock_send(t,e,n){throw"sockets not supported"},sock_shutdown(t,e){throw"sockets not supported"},sock_accept(t,e){throw"sockets not supported"}}}};class J{fd_allocate(t,e){return y}fd_close(){return 0}fd_fdstat_get(){return{ret:y,fdstat:null}}fd_fdstat_set_flags(t){return y}fd_fdstat_set_rights(t,e){return y}fd_filestat_get(){return{ret:y,filestat:null}}fd_filestat_set_size(t){return y}fd_filestat_set_times(t,e,n){return y}fd_pread(t,e){return{ret:y,data:new Uint8Array}}fd_prestat_get(){return{ret:y,prestat:null}}fd_pwrite(t,e){return{ret:y,nwritten:0}}fd_read(t){return{ret:y,data:new Uint8Array}}fd_readdir_single(t){return{ret:y,dirent:null}}fd_seek(t,e){return{ret:y,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:y,offset:0n}}fd_write(t){return{ret:y,nwritten:0}}path_create_directory(t){return y}path_filestat_get(t,e){return{ret:y,filestat:null}}path_filestat_set_times(t,e,n,r,s){return y}path_link(t,e,n){return y}path_unlink(t){return{ret:y,inode_obj:null}}path_lookup(t,e){return{ret:y,inode_obj:null}}path_open(t,e,n,r,s,i){return{ret:h,fd_obj:null}}path_readlink(t){return{ret:y,data:null}}path_remove_directory(t){return y}path_rename(t,e,n){return y}path_unlink_file(t){return y}}class R{}class O extends J{fd_allocate(t,e){if(this.file.size>t+e);else{const n=new Uint8Array(Number(t+e));n.set(this.file.data,0),this.file.data=n}return o}fd_fdstat_get(){return{ret:0,fdstat:new j(A,0)}}fd_filestat_set_size(t){if(this.file.size>t)this.file.data=new Uint8Array(this.file.data.buffer.slice(0,Number(t)));else{const e=new Uint8Array(Number(t));e.set(this.file.data,0),this.file.data=e}return o}fd_read(t){const e=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(t)));return this.file_pos+=BigInt(e.length),{ret:0,data:e}}fd_pread(t,e){return{ret:0,data:this.file.data.slice(Number(e),Number(e+BigInt(t)))}}fd_seek(t,e){let n;switch(e){case U:n=t;break;case k:n=this.file_pos+t;break;case v:n=BigInt(this.file.data.byteLength)+t;break;default:return{ret:f,offset:0n}}return n<0?{ret:f,offset:0n}:(this.file_pos=n,{ret:0,offset:this.file_pos})}fd_tell(){return{ret:0,offset:this.file_pos}}fd_write(t){if(this.file.readonly)return{ret:l,nwritten:0};if(this.file_pos+BigInt(t.byteLength)>this.file.size){const e=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(t.byteLength))),this.file.data.set(e)}return this.file.data.set(t,Number(this.file_pos)),this.file_pos+=BigInt(t.byteLength),{ret:0,nwritten:t.byteLength}}fd_pwrite(t,e){if(this.file.readonly)return{ret:l,nwritten:0};if(e+BigInt(t.byteLength)>this.file.size){const n=this.file.data;this.file.data=new Uint8Array(Number(e+BigInt(t.byteLength))),this.file.data.set(n)}return this.file.data.set(t,Number(e)),{ret:0,nwritten:t.byteLength}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(t){super(),this.file_pos=0n,this.file=t}}class G extends J{fd_seek(t,e){return{ret:l,offset:0n}}fd_tell(){return{ret:l,offset:0n}}fd_allocate(t,e){return l}fd_fdstat_get(){return{ret:0,fdstat:new j(D,0)}}fd_readdir_single(t){if(P.enabled&&(P.log("readdir_single",t),P.log(t,this.dir.contents.keys())),0n==t)return{ret:o,dirent:new T(1n,".",D)};if(1n==t)return{ret:o,dirent:new T(2n,"..",D)};if(t>=BigInt(this.dir.contents.size)+2n)return{ret:0,dirent:null};const[e,n]=Array.from(this.dir.contents.entries())[Number(t-2n)];return{ret:0,dirent:new T(t+1n,e,n.stat().filetype)}}path_filestat_get(t,e){const{ret:n,path:r}=C.from(e);if(null==r)return{ret:n,filestat:null};const{ret:s,entry:i}=this.dir.get_entry_for_path(r);return null==i?{ret:s,filestat:null}:{ret:0,filestat:i.stat()}}path_lookup(t,e){const{ret:n,path:r}=C.from(t);if(null==r)return{ret:n,inode_obj:null};const{ret:s,entry:i}=this.dir.get_entry_for_path(r);return null==i?{ret:s,inode_obj:null}:{ret:o,inode_obj:i}}path_open(t,e,n,r,s,i){const{ret:o,path:l}=C.from(e);if(null==l)return{ret:o,fd_obj:null};let{ret:f,entry:d}=this.dir.get_entry_for_path(l);if(null==d){if(f!=c)return{ret:f,fd_obj:null};if((n&E)!=E)return{ret:c,fd_obj:null};{const{ret:t,entry:r}=this.dir.create_entry_for_path(e,(n&z)==z);if(null==r)return{ret:t,fd_obj:null};d=r}}else if((n&L)==L)return{ret:a,fd_obj:null};return(n&z)==z&&d.stat().filetype!==D?{ret:h,fd_obj:null}:d.path_open(n,r,i)}path_create_directory(t){return this.path_open(0,t,E|z,0n,0n,0).ret}path_link(t,e,n){const{ret:r,path:s}=C.from(t);if(null==s)return r;if(s.is_dir)return c;const{ret:i,parent_entry:l,filename:f,entry:u}=this.dir.get_parent_dir_and_entry_for_path(s,!0);if(null==l||null==f)return i;if(null!=u){const t=e.stat().filetype==D,r=u.stat().filetype==D;if(t&&r){if(!(n&&u instanceof F))return a;if(0!=u.contents.size)return p}else{if(t&&!r)return h;if(!t&&r)return d;if(e.stat().filetype!=A||u.stat().filetype!=A)return a}}return n||e.stat().filetype!=D?(l.contents.set(f,e),o):w}path_unlink(t){const{ret:e,path:n}=C.from(t);if(null==n)return{ret:e,inode_obj:null};const{ret:r,parent_entry:s,filename:i,entry:l}=this.dir.get_parent_dir_and_entry_for_path(n,!0);return null==s||null==i?{ret:r,inode_obj:null}:null==l?{ret:c,inode_obj:null}:(s.contents.delete(i),{ret:o,inode_obj:l})}path_unlink_file(t){const{ret:e,path:n}=C.from(t);if(null==n)return e;const{ret:r,parent_entry:s,filename:i,entry:l}=this.dir.get_parent_dir_and_entry_for_path(n,!1);return null==s||null==i||null==l?r:l.stat().filetype===D?d:(s.contents.delete(i),o)}path_remove_directory(t){const{ret:e,path:n}=C.from(t);if(null==n)return e;const{ret:r,parent_entry:s,filename:i,entry:l}=this.dir.get_parent_dir_and_entry_for_path(n,!1);return null==s||null==i||null==l?r:l instanceof F&&l.stat().filetype===D?0!==l.contents.size?p:s.contents.delete(i)?o:c:h}fd_filestat_get(){return{ret:0,filestat:this.dir.stat()}}fd_filestat_set_size(t){return l}fd_read(t){return{ret:l,data:new Uint8Array}}fd_pread(t,e){return{ret:l,data:new Uint8Array}}fd_write(t){return{ret:l,nwritten:0}}fd_pwrite(t,e){return{ret:l,nwritten:0}}constructor(t){super(),this.dir=t}}class Z extends G{fd_prestat_get(){return{ret:0,prestat:M.dir(this.prestat_name)}}constructor(t,e){super(new F(e)),this.prestat_name=t}}class H extends R{path_open(t,e,n){if(this.readonly&&(e&BigInt(g))==BigInt(g))return{ret:w,fd_obj:null};if((t&V)==V){if(this.readonly)return{ret:w,fd_obj:null};this.data=new Uint8Array([])}const r=new O(this);return n&I&&r.fd_seek(0n,v),{ret:o,fd_obj:r}}get size(){return BigInt(this.data.byteLength)}stat(){return new N(A,this.size)}constructor(t,e){super(),this.data=new Uint8Array(t),this.readonly=!!e?.readonly}}let C=class t{static from(e){const n=new t;if(n.is_dir=e.endsWith("/"),e.startsWith("/"))return{ret:m,path:null};if(e.includes("\0"))return{ret:f,path:null};for(const t of e.split("/"))if(""!==t&&"."!==t)if(".."!==t)n.parts.push(t);else if(null==n.parts.pop())return{ret:m,path:null};return{ret:o,path:n}}to_path_string(){let t=this.parts.join("/");return this.is_dir&&(t+="/"),t}constructor(){this.parts=[],this.is_dir=!1}};class F extends R{path_open(t,e,n){return{ret:o,fd_obj:new G(this)}}stat(){return new N(D,0n)}get_entry_for_path(t){let e=this;for(const n of t.parts){if(!(e instanceof F))return{ret:h,entry:null};const t=e.contents.get(n);if(void 0===t)return P.log(n),{ret:c,entry:null};e=t}return t.is_dir&&e.stat().filetype!=D?{ret:h,entry:null}:{ret:o,entry:e}}get_parent_dir_and_entry_for_path(t,e){const n=t.parts.pop();if(void 0===n)return{ret:f,parent_entry:null,filename:null,entry:null};const{ret:r,entry:s}=this.get_entry_for_path(t);if(null==s)return{ret:r,parent_entry:null,filename:null,entry:null};if(!(s instanceof F))return{ret:h,parent_entry:null,filename:null,entry:null};const i=s.contents.get(n);return void 0===i?e?{ret:o,parent_entry:s,filename:n,entry:null}:{ret:c,parent_entry:null,filename:null,entry:null}:t.is_dir&&i.stat().filetype!=D?{ret:h,parent_entry:null,filename:null,entry:null}:{ret:o,parent_entry:s,filename:n,entry:i}}create_entry_for_path(t,e){const{ret:n,path:r}=C.from(t);if(null==r)return{ret:n,entry:null};let s,{ret:i,parent_entry:l,filename:f,entry:d}=this.get_parent_dir_and_entry_for_path(r,!0);return null==l||null==f?{ret:i,entry:null}:null!=d?{ret:a,entry:null}:(P.log("create",r),s=e?new F(new Map):new H(new ArrayBuffer(0)),l.contents.set(f,s),d=s,{ret:o,entry:d})}constructor(t){super(),this.contents=t instanceof Array?new Map(t):t}}class X extends J{fd_filestat_get(){return{ret:0,filestat:new N(B,BigInt(0))}}fd_fdstat_get(){const t=new j(B,0);return t.fs_rights_base=BigInt(g),{ret:0,fdstat:t}}fd_write(t){return this.write(t),{ret:0,nwritten:t.byteLength}}static lineBuffered(t){const e=new TextDecoder("utf-8",{fatal:!1});let n="";return new X((r=>{n+=e.decode(r,{stream:!0});const s=n.split("\n");for(const[e,r]of s.entries())e<s.length-1?t(r):n=r}))}constructor(t){super(),this.write=t}}}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return s[t](n,n.exports,o),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},o.a=(s,i,o)=>{var l;o&&((l=[]).d=-1);var a,f,d,u=new Set,c=s.exports,_=new Promise(((t,e)=>{d=e,f=t}));_[e]=c,_[t]=t=>(l&&t(l),u.forEach(t),_.catch((t=>{}))),s.exports=_,i((s=>{var i;a=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var i=[];i.d=0,s.then((t=>{o[e]=t,r(i)}),(t=>{o[n]=t,r(i)}));var o={};return o[t]=t=>t(i),o}}var l={};return l[t]=t=>{},l[e]=s,l})))(s);var o=()=>a.map((t=>{if(t[n])throw t[n];return t[e]})),f=new Promise((e=>{(i=()=>e(o)).r=0;var n=t=>t!==l&&!u.has(t)&&(u.add(t),t&&!t.d&&(i.r++,t.push(i)));a.map((e=>e[t](n)))}));return i.r?f:o()}),(t=>(t?d(_[n]=t):f(c),r(l)))),l&&l.d<0&&(l.d=0)},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(265)})();